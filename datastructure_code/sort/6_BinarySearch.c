#include <stdio.h>
#include <stdlib.h>
/*
二分查找是比顺序查找效率高的一种查找算法，
但它只适用于有序的数据集。二分查找也叫折半查找，
它的查找步骤为：
首先，假设表中元素是按升序排列，
将表 ###中间位置##### 记录的关键字与查找关键字比较，
如果两者相等，则查找成功；
否则利用中间位置记录将表分成前、后两个子表，
如果中间位置记录的关键字大于查找关键字，
则进一步查找前一子表，否则进一步查找后一子表。
重复以上过程，直到找到满足条件的记录，使查找成功，
或直到子表不存在为止，此时查找不成功，

*/                   
                 //升序数组 查找的元素  范围开始  结束 
int BinarySearch(int *array, int key, int low, int high)
{
    int mid;
    while (low <= high)// 范围正常 
    {
        mid = (low + high) / 2;//中间元素的 下标 
        if (key == array[mid])//中间元素是否 所查找的元素 
        {
            return mid+1;//相等 返回元素下标  
        }
        else if (key < array[mid])//所查元素臂 中间元素小  则在 前区间查找 
        {
            high = mid - 1;//将区间 右截至提至 中间元素下标前一个元素 
        }
        else//所查元素臂 中间元素大 则 在后区间查找 
        {
            low = mid + 1;//将区间  左截至 提至  中间元素下标后一个元素 
        }
    }
    return 0;
}

int main()
{
    int n, i, key, position;
    int *array;// 升序数组 
    printf("请输入有序数组的大小：");
    scanf("%d", &n);//数组大小 
    array = (int*) malloc(sizeof(int) * n);//开辟内存 
    printf("请按升序输入数据：\n");
    for (i = 0; i < n; i++)
    {
        scanf("%d", &array[i]);//数组的每一个元素  升序排列 
    }
    printf("请输入想要查找的数：");
    scanf("%d", &key);//需要查找的数 
    if (position = BinarySearch(array, key, 0, n - 1)) 
    {
        printf("%d的位置为：%d\n", key, position);
    }
    else
    {
        printf("%d不存在\n", key);    
    }
}
