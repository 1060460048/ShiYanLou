# c++11新特性

[参考](https://www.cnblogs.com/feng-sc/p/5710724.html)

[C++11系列-什么是C++11](http://towriting.com/blog/2013/08/01/what-is-cpp11/)

# 目录

    1、关键字及新语法
      1.1、auto 关键字及用法
      1.2、nullptr 关键字及用法
      1.3、for 循环语法
    2、STL容器
      2.1、std::array
      2.2、std::forward_list
      2.3、std::unordered_map
      2.4、std::unordered_set
    3、多线程
      3.1、std::thread
      3.2、st::atomic
      3.3、std::condition_variable
    4、智能指针内存管理
      4.1、std::shared_ptr
      4.2、std::weak_ptr
    5、其他
      5.1、std::function、std::bind封装可执行对象
      5.2、lamda表达式
      
# 1、关键字及新语法
## 1.1、auto关键字及用法
　　A、auto关键字能做什么？ 编译器根据上下文情况，确定auto变量的真正类型。
```c
auto AddTest(int a, int b) 
{
    return a + b;
}

int main()
{
    auto index = 10;
    auto str = "abc";
    auto ret = AddTest(1,2);
    std::cout << "index:" << index << std::endl;
    std::cout << "str:" << str << std::endl;
    std::cout << "res:" << ret << std::endl;
}
// auto在C++14中可以作为函数的返回值
```

     B、auto作为函数返回值时，只能用于定义函数，不能用于声明函数。
```c
// 声明函数
#pragma once
class Test
{
public:
    auto TestWork(int a ,int b);
};
// 定义函数
#pragma once
class Test
{
public:
    auto TestWork(int a, int b)
    {
        return a + b;
    }
};
```
## 1.2、nullptr关键字及用法
```c
class Test
{
public:
    void TestWork(int index)
    {
        std::cout << "TestWork 1" << std::endl;
    }
    void TestWork(int * index)
    {
        std::cout << "TestWork 2" << std::endl;
    }
};

int main()
{
    Test test;
    test.TestWork(NULL);    // NULL被翻译成0       >>> TestWork 1
    test.TestWork(nullptr); // nullptr确定为 指针  >>> TestWork 2
}
```

## 1.3 范围for 配合auto

```c
int main()
{
    int numbers[] = { 1,2,3,4,5 };
    std::cout << "numbers:" << std::endl;
    for (auto number : numbers)
    {
        std::cout << number << std::endl;
    }
}
```
# 2、STL容器
## 2.1、std::array 跟数组并没有太大区别  增加了迭代器等函数
```c
#include <array>
int main()
{
    std::array<int, 4> arrayDemo = { 1,2,3,4 };
    std::cout << "arrayDemo:" << std::endl;
    for (auto itor : arrayDemo)
    {
        std::cout << itor << std::endl;
    }
    int arrayDemoSize = sizeof(arrayDemo);
    std::cout << "arrayDemo size:" << arrayDemoSize << std::endl; // 4*4 =16
    return 0;
}

```

## 2.2、std::forward_list 新增的线性表，与list区别在于它是单向链表
    链表在对数据进行插入和删除是比顺序存储的线性表有优势，
    因此在插入和删除操作频繁的应用场景中，
    使用list和forward_list比使用array、vector和deque效率要高很多。
```C
#include <forward_list>
int main()
{
    std::forward_list<int> numbers = {1,2,3,4,5,4,4};
    std::cout << "numbers:" << std::endl;
    for (auto number : numbers)
    {
        std::cout << number << std::endl;
    }
    numbers.remove(4);
    std::cout << "numbers after remove:" << std::endl;
    for (auto number : numbers)
    {
        std::cout << number << std::endl;
    }
    return 0;
}

```


